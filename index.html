<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üíé Elite Jackpot Machine</title>
  <style>
    body {
      background: #1b1b1b;
      color: #e3c77c;
      font-family: 'Georgia', serif;
      text-align: center;
      padding: 20px;
      margin: 0;
      box-sizing: border-box;
    }
    .container {
      background: #2b2b2b;
      border: 3px solid #e3c77c;
      border-radius: 20px;
      padding: 20px;
      max-width: 600px;
      margin: auto;
      width: 100%;
    }
    .group-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      text-align: left;
      margin-top: 20px;
      font-size: 1.1em;
    }
    .display {
      background: #111;
      border: 2px solid #e3c77c;
      padding: 10px;
      margin-top: 20px;
      font-size: 1.2em;
    }
    button {
      background: #e3c77c;
      border: none;
      padding: 10px 20px;
      font-size: 1em;
      color: #1b1b1b;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #f39c12;
    }
    input[type="number"] {
      width: 60px;
      padding: 5px;
      border: 1px solid #e3c77c;
      background: #1b1b1b;
      color: #e3c77c;
      font-size: 1em;
      margin-right: 10px;
    }
    /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    @media (max-width: 600px) {
      .container {
        padding: 10px;
      }
      .group-stats {
        grid-template-columns: 1fr;
      }
      .display {
        font-size: 1em;
      }
      button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üíé –≠–ª–∏—Ç–Ω—ã–π –î–∂–µ–∫–ø–æ—Ç –ö–ª–∏–∫–µ—Ä</h1>
    <p>–®–∞–Ω—Å —É—Å–ø–µ—Ö–∞ (%): 
      <input type="number" id="chanceInput" value="25" min="0.01" max="100" step="0.01">
    </p>
    <p>–ê–≤—Ç–æ–∫–ª–∏–∫: 
      <input type="number" id="autoClicks" value="1" min="1" max="1000">
      —Ä–∞–∑
    </p>
    <button onclick="roll()">–ó–∞–ø—É—Å—Ç–∏—Ç—å</button>

    <div class="display" id="mainResult">üé∞ –û–∂–∏–¥–∞–Ω–∏–µ...</div>
    <div class="display" id="jackpotInfo">üí∞ –î–∂–µ–∫–ø–æ—Ç: –ø–æ–∫–∞ –Ω–µ –≤—ã–ø–∞–ª</div>
    <div class="display" id="stats">
      <p>–í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–æ–∫: 0</p>
      <p>–í—Å–µ–≥–æ –≤—ã–∏–≥—Ä—ã—à–µ–π: 0</p>
      <p>–ú–∞–ª—ã—Ö –¥–∂–µ–∫–ø–æ—Ç–æ–≤: 0 | –°—Ä–µ–¥–Ω–∏—Ö: 0 | –ë–æ–ª—å—à–∏—Ö: 0</p>
    </div>

    <div class="group-stats" id="groupStats"></div>
  </div>

  <script>
    let totalChecks = 0;
    let totalWins = 0;
    let rollsSinceJackpot = 0;
    let jackpotCounts = { small: 0, medium: 0, big: 0 };
    const groupHits = Array(11).fill(0);

    const groupChances = Array.from({ length: 11 }, (_, i) => 100 / Math.pow(2, i + 1));
    const groupNormalized = (() => {
      const total = groupChances.reduce((a, b) => a + b, 0);
      return groupChances.map(c => c / total);
    })();

    function roll() {
      const chance = parseFloat(document.getElementById('chanceInput').value);
      const autoClicks = parseInt(document.getElementById('autoClicks').value);

      totalChecks += autoClicks;
      let resultLog = '';
      let jackpotResult = null;

      for (let i = 0; i < autoClicks; i++) {
        const roll = Math.random() * 100;
        const isSuccess = roll < chance;

        if (isSuccess) {
          totalWins++;
          const groupIndex = selectGroup();
          groupHits[groupIndex]++;
          resultLog = `‚úÖ –£—Å–ø–µ—Ö! –ì—Ä—É–ø–ø–∞ ${groupIndex + 1}<br>`;
          jackpotResult = checkJackpot();
          if (jackpotResult) {
            resultLog += `üí∞ <b>${jackpotResult.toUpperCase()} –î–ñ–ï–ö–ü–û–¢!</b><br>`;
          }
        } else {
          resultLog = `‚ùå –ü—Ä–æ–≤–∞–ª<br>`;
        }
      }

      updateUI(resultLog, jackpotResult);
    }

    function selectGroup() {
      const r = Math.random();
      let acc = 0;
      for (let i = 0; i < groupNormalized.length; i++) {
        acc += groupNormalized[i];
        if (r <= acc) return i;
      }
      return groupNormalized.length - 1;
    }

    function checkJackpot() {
      rollsSinceJackpot++;
      let chance = 0;
      let type = null;

      if (rollsSinceJackpot >= 500) {
        chance = 0.05; type = "–±–æ–ª—å—à–æ–π";
      } else if (rollsSinceJackpot >= 250) {
        chance = 0.01; type = "—Å—Ä–µ–¥–Ω–∏–π";
      } else if (rollsSinceJackpot >= 100) {
        chance = 0.005; type = "–º–∞–ª—ã–π";
      }

      if (type && Math.random() < chance) {
        jackpotCounts[type]++;
        rollsSinceJackpot = 0;
        return type;
      }

      return null;
    }

    function updateUI(resultLog, jackpotResult) {
      document.getElementById('mainResult').innerHTML = resultLog;

      if (jackpotResult) {
        document.getElementById('jackpotInfo').innerHTML = `üí∞ –î–∂–µ–∫–ø–æ—Ç: ${jackpotResult}`;
      } else {
        document.getElementById('jackpotInfo').innerHTML = "üí∞ –î–∂–µ–∫–ø–æ—Ç: –ø–æ–∫–∞ –Ω–µ –≤—ã–ø–∞–ª";
      }

      document.getElementById('stats').innerHTML = `
        <p>–í—Å–µ–≥–æ –ø—Ä–æ–≤–µ—Ä–æ–∫: ${totalChecks}</p>
        <p>–í—Å–µ–≥–æ –≤—ã–∏–≥—Ä—ã—à–µ–π: ${totalWins}</p>
        <p>–ú–∞–ª—ã—Ö –¥–∂–µ–∫–ø–æ—Ç–æ–≤: ${jackpotCounts.small} | –°—Ä–µ–¥–Ω–∏—Ö: ${jackpotCounts.medium} | –ë–æ–ª—å—à–∏—Ö: ${jackpotCounts.big}</p>
      `;

      const groupDisplay = groupHits.map((val, i) => `–ì—Ä—É–ø–ø–∞ ${i + 1}: ${val} —Ä–∞–∑`).join('<br>');
      document.getElementById('groupStats').innerHTML = groupDisplay;
    }
  </script>
</body>
</html>
