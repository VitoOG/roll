<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>💎 Elite Jackpot Machine</title>
  <style>
    body {
      background: #1b1b1b;
      color: #e3c77c;
      font-family: 'Georgia', serif;
      text-align: center;
      padding: 20px;
      margin: 0;
      box-sizing: border-box;
    }
    .container {
      background: #2b2b2b;
      border: 3px solid #e3c77c;
      border-radius: 20px;
      padding: 20px;
      max-width: 600px;
      margin: auto;
      width: 100%;
    }
    .slot-machine {
      display: flex;
      justify-content: space-around;
      margin-top: 30px;
      position: relative;
      overflow: hidden;
    }
    .reel {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      height: 180px;
      width: 60px;
      overflow: hidden;
      border: 2px solid #e3c77c;
      border-radius: 10px;
      position: relative;
    }
    .symbol {
      font-size: 2em;
      line-height: 60px;
      height: 60px;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
    }
    .spin-button {
      background: #e3c77c;
      border: none;
      padding: 10px 20px;
      font-size: 1.2em;
      color: #1b1b1b;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 20px;
      transition: background-color 0.3s;
    }
    .spin-button:hover {
      background-color: #f39c12;
    }
    .display {
      background: #111;
      border: 2px solid #e3c77c;
      padding: 10px;
      margin-top: 20px;
      font-size: 1.2em;
    }
    .result {
      font-size: 1.2em;
      margin-top: 20px;
    }
    input[type="number"] {
      width: 60px;
      padding: 5px;
      border: 1px solid #e3c77c;
      background: #1b1b1b;
      color: #e3c77c;
      font-size: 1em;
      margin-right: 10px;
    }
    /* Мобильная адаптивность */
    @media (max-width: 600px) {
      .container {
        padding: 10px;
      }
      .slot-machine {
        flex-direction: column;
        justify-content: center;
      }
      .reel {
        margin: 10px 0;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>💎 Элитный Джекпот Кликер</h1>
    <p>Шанс успеха (%): 
      <input type="number" id="chanceInput" value="25" min="0.01" max="100" step="0.01">
    </p>
    <p>Автоклик: 
      <input type="number" id="autoClicks" value="1" min="1" max="1000">
      раз
    </p>
    <button class="spin-button" onclick="roll()">Запустить</button>

    <div class="slot-machine">
      <div class="reel" id="reel1">
        <div class="symbol">🍒</div>
        <div class="symbol">🍋</div>
        <div class="symbol">💎</div>
        <div class="symbol">🍒</div>
        <div class="symbol">🍋</div>
        <div class="symbol">💎</div>
      </div>
      <div class="reel" id="reel2">
        <div class="symbol">🍒</div>
        <div class="symbol">🍋</div>
        <div class="symbol">💎</div>
        <div class="symbol">🍒</div>
        <div class="symbol">🍋</div>
        <div class="symbol">💎</div>
      </div>
      <div class="reel" id="reel3">
        <div class="symbol">🍒</div>
        <div class="symbol">🍋</div>
        <div class="symbol">💎</div>
        <div class="symbol">🍒</div>
        <div class="symbol">🍋</div>
        <div class="symbol">💎</div>
      </div>
      <div class="reel" id="reel4">
        <div class="symbol">🍒</div>
        <div class="symbol">🍋</div>
        <div class="symbol">💎</div>
        <div class="symbol">🍒</div>
        <div class="symbol">🍋</div>
        <div class="symbol">💎</div>
      </div>
      <div class="reel" id="reel5">
        <div class="symbol">🍒</div>
        <div class="symbol">🍋</div>
        <div class="symbol">💎</div>
        <div class="symbol">🍒</div>
        <div class="symbol">🍋</div>
        <div class="symbol">💎</div>
      </div>
    </div>

    <div class="result" id="mainResult">🎰 Ожидание...</div>
    <div class="display" id="jackpotInfo">💰 Джекпот: пока не выпал</div>
    <div class="display" id="stats">
      <p>Всего проверок: 0</p>
      <p>Всего выигрышей: 0</p>
      <p>Малых джекпотов: 0 | Средних: 0 | Больших: 0</p>
      <p id="groupStats">Группа 1: 0 | Группа 2: 0 | Группа 3: 0 | Группа 4: 0 | Группа 5: 0 | Группа 6: 0 | Группа 7: 0 | Группа 8: 0 | Группа 9: 0 | Группа 10: 0 | Группа 11: 0 | Джекпот Малый: 0 | Джекпот Средний: 0 | Джекпот Большой: 0</p>
    </div>
  </div>

  <script>
    let totalChecks = 0;
    let totalWins = 0;
    let rollsSinceJackpot = 0;
    let jackpotCounts = { small: 0, medium: 0, big: 0 };
    const groupHits = Array(11).fill(0);

    const groupChances = Array.from({ length: 11 }, (_, i) => 100 / Math.pow(2, i + 1));
    const groupNormalized = (() => {
      const total = groupChances.reduce((a, b) => a + b, 0);
      return groupChances.map(c => c / total);
    })();

    // Символы для барабанов
    const symbols = ['🍒', '🍋', '💎', '🍉', '🍇', '🍊', '🍓', '🍀', '🍍', '🥥', '🌟', '🍔'];

    function roll() {
      const chance = parseFloat(document.getElementById('chanceInput').value);
      const autoClicks = parseInt(document.getElementById('autoClicks').value);

      totalChecks += autoClicks;
      let resultLog = '';
      let jackpotResult = null;

      // Анимация прокрутки барабанов
      spinReels();

      for (let i = 0; i < autoClicks; i++) {
        const roll = Math.random() * 100;
        const isSuccess = roll < chance;

        if (isSuccess) {
          totalWins++;
          const groupIndex = selectGroup();
          groupHits[groupIndex]++;
          resultLog = `✅ Успех! Группа ${groupIndex + 1}<br>`;
          jackpotResult = checkJackpot();
          if (jackpotResult) {
            resultLog += `💰 <b>${jackpotResult.toUpperCase()} ДЖЕКПОТ!</b><br>`;
          }
        } else {
          resultLog = `❌ Провал<br>`;
        }
      }

      updateUI(resultLog, jackpotResult);
    }

    function selectGroup() {
      const r = Math.random();
      let acc = 0;
      for (let i = 0; i < groupNormalized.length; i++) {
        acc += groupNormalized[i];
        if (r <= acc) return i;
      }
      return groupNormalized.length - 1;
    }

    function checkJackpot() {
      rollsSinceJackpot++;
      let chance = 0;
      let type = null;

      if (rollsSinceJackpot >= 500) {
        chance = 0.05; type = "большой";
      } else if (rollsSinceJackpot >= 250) {
        chance = 0.01; type = "средний";
      } else if (rollsSinceJackpot >= 100) {
        chance = 0.005; type = "малый";
      }

      if (type && Math.random() < chance) {
        jackpotCounts[type]++;
        rollsSinceJackpot = 0;
        return type;
      }

      return null;
    }

    function updateUI(resultLog, jackpotResult) {
      document.getElementById('mainResult').innerHTML = resultLog;

      if (jackpotResult) {
        document.getElementById('jackpotInfo').innerHTML = `💰 Джекпот: ${jackpotResult.toUpperCase()}!`;
      }

      // Обновляем статистику
      document.getElementById('stats').innerHTML = `
        <p>Всего проверок: ${totalChecks}</p>
        <p>Всего выигрышей: ${totalWins}</p>
        <p>Малых джекпотов: ${jackpotCounts.small} | Средних: ${jackpotCounts.medium} | Больших: ${jackpotCounts.big}</p>
      `;

      // Обновляем статистику групп
      document.getElementById('groupStats').innerHTML = groupHits.map((count, i) => `Группа ${i + 1}: ${count}`).join(' | ') + 
        ` | Джекпот Малый: ${jackpotCounts.small} | Джекпот Средний: ${jackpotCounts.medium} | Джекпот Большой: ${jackpotCounts.big}`;
    }

    function spinReels() {
      const reels = [document.getElementById('reel1'), document.getElementById('reel2'), document.getElementById('reel3'), document.getElementById('reel4'), document.getElementById('reel5')];

      reels.forEach(reel => {
        let randomSymbols = [...symbols].sort(() => 0.5 - Math.random()).slice(0, 6); // случайные символы
        let symbolElements = reel.querySelectorAll('.symbol');

        symbolElements.forEach((symbol, index) => {
          symbol.innerHTML = randomSymbols[index];
        });
      });
    }
  </script>
</body>
</html>
