<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>üé∞ –≠–ª–∏—Ç–Ω—ã–π –î–∂–µ–∫–ø–æ—Ç –°–ª–æ—Ç</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0; padding: 20px;
      background: #1b1b1b; color: #e3c77c;
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
    }
    .slot-machine {
      display: flex; justify-content: center;
      margin: 20px auto;
      overflow: hidden;
      border: 3px solid #e3c77c;
      border-radius: 10px;
      background: #111;
      max-width: 320px;
      height: 180px;
    }
    .reel {
      width: 60px; height: 180px;
      overflow: hidden; position: relative;
      border-left: 1px solid #333; border-right: 1px solid #333;
    }
    .reel-track {
      position: absolute; top: 0; left: 0;
      width: 100%;
      transition: transform 1s cubic-bezier(.25,.1,.25,1);
    }
    .symbol {
      height: 60px; line-height: 60px;
      font-size: 2em;
    }
    button {
      margin-top: 10px; padding: 8px 16px;
      background: #e3c77c; color: #1b1b1b;
      border: none; border-radius: 5px;
      cursor: pointer; font-size: 1em;
    }
    .stats, .groups {
      max-width: 320px; margin: 10px auto;
      text-align: left; font-size: 0.9em;
      background: #2b2b2b; padding: 10px;
      border-radius: 8px; border: 2px solid #e3c77c;
    }
    .groups p { margin: 4px 0; }
    @media(max-width:600px){
      .slot-machine { max-width: 260px; }
      .symbol { font-size:1.5em; }
    }
  </style>
</head>
<body>
  <h1>üé∞ –≠–ª–∏—Ç–Ω—ã–π –î–∂–µ–∫–ø–æ—Ç –°–ª–æ—Ç</h1>
  <div class="slot-machine" id="slotMachine"></div>
  <button onclick="spin()">–ö—Ä—É—Ç–∏—Ç—å!</button>

  <div class="stats" id="stats"></div>
  <div class="groups" id="groups"></div>

  <script>
    const symbols = ['üçí','üçã','üçá','üçâ','üîî','‚≠ê','üíé','üçÄ','üëë','7Ô∏è‚É£','üçé','ü•ù'];
    let totalSpins = 0, totalWins = 0, rollsSinceJP = 0;
    const counts = { groups: Array(11).fill(0), smallJP:0, mediumJP:0, bigJP:0 };

    // –°–æ–∑–¥–∞—ë–º 5 –±–∞—Ä–∞–±–∞–Ω–æ–≤
    const slot = document.getElementById('slotMachine');
    for(let i=0;i<5;i++){
      const reel = document.createElement('div');
      reel.className = 'reel';
      const track = document.createElement('div');
      track.className = 'reel-track';
      reel.appendChild(track);
      slot.appendChild(reel);
    }

    function spin(){
      totalSpins++;
      rollsSinceJP++;
      const results = [];
      document.querySelectorAll('.reel-track').forEach((track, idx)=>{
        // –ó–∞–ø–æ–ª–Ω—è–µ–º 3+1 —Å–∏–º–≤–æ–ª–∞–º–∏ (–¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏)
        track.innerHTML = '';
        for(let j=0;j<4;j++){
          const sym = document.createElement('div');
          sym.className='symbol';
          sym.textContent = symbols[Math.floor(Math.random()*symbols.length)];
          track.appendChild(sym);
        }
        // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é: —Å–º–µ—â–µ–Ω–∏–µ –Ω–∞ —Ä–æ–≤–Ω–æ –æ–¥–Ω—É —è—á–µ–π–∫—É (60px)
        track.style.transform = 'translateY(-60px)';
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ä–µ–¥–Ω–∏–π —Å–∏–º–≤–æ–ª
        results[idx] = track.children[1].textContent;
      });

      // –ü–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏, –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
      setTimeout(()=>{
        const uniq = new Set(results);
        let groupIndex;
        if(uniq.size===1){
          // –≤—ã–∏–≥—Ä—ã—à: –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –¥–∂–µ–∫–ø–æ—Ç –∏–ª–∏ –≥—Ä—É–ø–ø–∞ –ø–æ —Å–∏–º–≤–æ–ª—É
          groupIndex = symbols.indexOf(results[0]);
          totalWins++;
          if(rollsSinceJP>=500 && Math.random()<0.05){
            counts.bigJP++; groupIndex=13; rollsSinceJP=0;
          } else if(rollsSinceJP>=250 && Math.random()<0.01){
            counts.mediumJP++; groupIndex=12; rollsSinceJP=0;
          } else if(rollsSinceJP>=100 && Math.random()<0.005){
            counts.smallJP++; groupIndex=11; rollsSinceJP=0;
          }
        } else {
          // –Ω–µ—Ç –≤—ã–∏–≥—Ä—ã—à–∞
          groupIndex = null;
        }
        if(groupIndex!==null){
          if(groupIndex<11) counts.groups[groupIndex]++; 
        }
        updateUI();
      }, 1000);
    }

    function updateUI(){
      const st = document.getElementById('stats');
      st.innerHTML = 
        `<p>–í—Å–µ–≥–æ —Å–ø–∏–Ω–æ–≤: ${totalSpins}</p>`+
        `<p>–í—ã–∏–≥—Ä—ã—à–µ–π: ${totalWins}</p>`+
        `<p>–î–∂–µ–∫–ø–æ—Ç –º–∞–ª—ã–π: ${counts.smallJP} | —Å—Ä–µ–¥–Ω–∏–π: ${counts.mediumJP} | –±–æ–ª—å—à–æ–π: ${counts.bigJP}</p>`;
      const gr = document.getElementById('groups');
      gr.innerHTML = counts.groups
        .map((c,i)=>`<p>–ì—Ä—É–ø–ø–∞ ${i+1} (${symbols[i]}): ${c}</p>`)
        .concat([
          `<p>–ì—Ä—É–ø–ø–∞ 12 (–º–∞–ª—ã–π JP): ${counts.smallJP}</p>`,
          `<p>–ì—Ä—É–ø–ø–∞ 13 (—Å—Ä–µ–¥–Ω–∏–π JP): ${counts.mediumJP}</p>`,
          `<p>–ì—Ä—É–ø–ø–∞ 14 (–±–æ–ª—å—à–æ–π JP): ${counts.bigJP}</p>`
        ]).join('');
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    updateUI();
  </script>
</body>
</html>
